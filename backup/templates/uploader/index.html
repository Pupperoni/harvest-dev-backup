{% extends "base.html" %}
{% block content %}
{% load static %}


<script>
function check_file_extension() {
    if(document.getElementById('pattern_file').value.lastIndexOf(".py") == -1) {
        alert("Please upload only Python Pattern File");
    show
        return false;
    }
}
</script>



<div class="container ">
    <div class="form-container">
        <div class="row-fluid">
            <div class="image-branding">
                <img src="{% static 'img/harvest_robot.png' %}" alt="Harvest Robot">
                 <span id="alertDanger" class="tm-label tm-label-important">Please upload only Python File.</span>
            </div>
            <form method="POST" action="" enctype="multipart/form-data">{% csrf_token %}
            <div class="col-sm-8 input-files">
                <div class="form-group file-upload">
                <div class="file-select">
                    <div class="file-select-button" id="fileName">Choose File</div>
                    <div class="file-select-name" id="noFile">No file chosen...</div>
                    <input type="file" name="pattern_file" id="pattern_file" accept=".py" onchange="check_file_extension();">
                </div>

            </div>
            <div class="pattern-button">
                <button type="submit" class="btn btn-default custom-submit-btn" name="farmer">Farmer</button>
                <button type="submit" class="btn btn-default custom-submit-btn" name="rss">RSS</button>
                <button type="submit" class="btn btn-default custom-submit-btn" name="page_crawler">Page Crawler</button>
            </div>
        <br>
        </div>
        <br>
        {% if error %}
        <div class="random-par col-sm-8">
           <div class="tm-alert tm-alert-warning">
                <button type="button" class="close" data-dismiss="alert">&times;</button>
                        {{ error }}
            </div>
        </div>
        {% endif %}
         </form>
        </div>
    </div>
</div>
<script type="text/javascript" src="//code.jquery.com/jquery-1.10.2.min.js"></script>
<script type="text/javascript" type="text/ecmascript-6">
  $('#pattern_file').bind('change', function () {
  var filename = $("#pattern_file").val();
  if (/^\s*$/.test(filename)) {
    $(".file-upload").removeClass('active');
    $("#noFile").text("No file chosen...");
  }
  else {
    $(".file-upload").addClass('active');
    $("#noFile").text(filename.replace("C:\\fakepath\\", ""));
  }
});
</script>

{% endblock %}
